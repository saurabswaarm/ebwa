(this.webpackJsonpebwa_react=this.webpackJsonpebwa_react||[]).push([[0],{41:function(e,t,s){},58:function(e,t){},60:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(17),r=s.n(n),o=(s(41),s(0));var l=function(e){return Object(o.jsx)("div",{className:"container-fluid",children:Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsx)("div",{className:"col-lg-8 col-sm-10 p-0 bg-white",children:e.children})})})},i=s(5),d=s(3),j=s(4),u=s(9),h=s.n(u),b=s(14),m="SET_USER",x="REMOVE_USER",f="SET_USER_ERR",p="SET_NOTICEBOARD",O="REMOVE_NOTICEBOARD",g="SET_NOTICEBOARD_ERR",v={host:"http://ebwa.in"},y=function(e){return{type:m,payload:e}},N=function(e){return console.log(e),{type:f,payload:{code:e.code,status:e.payload.status,message:e.payload.message}}},w=function(){return{type:x,payload:null}},k=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,s){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v.host,"/api/posts"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:return c=e.sent,e.next=6,c.json();case 6:4==(a=e.sent).code?t((s=a.payload.posts,{type:p,payload:s})):t({type:g,payload:a}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t(w());case 14:case"end":return e.stop()}var s}),e,null,[[0,10]])})));return function(t,s){return e.apply(this,arguments)}}()},E=function(e){return e.user},C=function(e){return e.noticeBoard};var S=function(){var e=Object(i.b)(),t=Object(i.c)(E),s=Object(d.f)(),c=Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)("span",{className:"nav-link active","aria-current":"page",onClick:function(t){var c;null===(c=document.getElementById("nav-toggle-toggle"))||void 0===c||c.click(),e(function(){var e=Object(b.a)(h.a.mark((function e(t,s){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Logout action fired"),e.next=3,fetch("".concat(v.host,"/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:return c=e.sent,e.next=6,c.json();case 6:3==(a=e.sent).code||t(N(a)),t(w());case 8:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()),s.push("/f/auth/login"),console.log(s)},children:"Log Out"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(j.b,{className:"nav-link",to:"/f/auth/changepassword",children:"Change Password"})})]}),a=Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("li",{className:"nav-item",onClick:function(){return document.getElementById("nav-toggle-toggle").click()},children:Object(o.jsx)(j.b,{className:"nav-link",to:"/f/auth/login",children:"Log In"})})});return Object(o.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(o.jsxs)("div",{className:"container-fluid",children:[Object(o.jsx)(j.b,{className:"navbar-brand",to:"/",children:"EBWA"}),Object(o.jsx)("div",{className:"text-light",children:t.name}),Object(o.jsx)("button",{id:"nav-toggle-toggle",className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(o.jsx)("span",{className:"navbar-toggler-icon"})}),Object(o.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(o.jsx)("ul",{className:"navbar-nav",children:t?c:a})})]})})},T=s(13);var F=function(){var e=Object(c.useState)(""),t=Object(T.a)(e,2),s=t[0],a=t[1],n=Object(d.f)();function r(){return(r=Object(b.a)(h.a.mark((function e(t){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(s+" is being claimed"),e.next=4,fetch("http://localhost:3006/api/auth/createaccount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});case 4:return c=e.sent,e.next=7,c.json();case 7:1==(a=e.sent).code?n.push("/f/auth/accountcreated"):456==a.code?n.push("/f/auth/login"):455==a.code?n.push("/f/auth/noinvite"):n.push("/f/error");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5",children:[Object(o.jsx)("h1",{children:"Claim your EBWA portal account"}),Object(o.jsx)("p",{className:"fs-4",children:"Please enter the email id you used to send documents to the association. Make sure you have access to it as you will be emailed a password to login to this portal"}),Object(o.jsxs)("form",{className:"p-2 d-flex flex-column align-items-center",children:[Object(o.jsx)("input",{className:"form-control",type:"email",placeholder:"email",value:s,onChange:function(e){a(e.currentTarget.value)}}),Object(o.jsx)("button",{onClick:function(e){return r.apply(this,arguments)},className:"btn btn-info mt-4",children:"Claim Account"})]}),Object(o.jsx)("hr",{className:"my-3"}),Object(o.jsx)("h1",{className:"mt-4",children:"Already Have an account?"}),Object(o.jsx)(j.b,{to:"/f/auth/login/",className:"btn btn-info mt-2 align-self-center",children:"Login"})]})};var P=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"We have mailed you a password."}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"Congratulation, your documents have been verified and now you may use the portal."}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"We have emailed you a password that you may use to login to the portal."}),Object(o.jsx)(j.b,{to:"/f/auth/login",className:"btn btn-info mt-2 align-self-center",children:"LogIn"})]})};var I=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Your Email Isn't Valid"}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"If you haven't submitted your documents, you will need to do so, so that we may verify your identity."}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"However if you have submitted them, please check back in a few days as we may still be processing them."})]})},B=s(19),A=s(11);var R=function(){var e=Object(d.f)(),t=Object(i.b)(),s=Object(i.c)(E),a=Object(c.useState)(!0),n=Object(T.a)(a,2),r=n[0],l=n[1],u=Object(c.useState)({email:"saurabsalhotra@gmail.com",password:"BSZTD"}),m=Object(T.a)(u,2),x=m[0],f=m[1];function p(e){var t=e.currentTarget;f(Object(A.a)(Object(A.a)({},x),{},Object(B.a)({},t.name,t.value)))}return Object(c.useEffect)((function(){l(!function(){var e=x.email,t=x.password;return!(!e||!t)&&(e.includes("@")&&e.includes(".")&&t.length>=5)}()),s&&e.push("/f/noticeboard")})),Object(o.jsxs)("form",{className:"p-2 d-flex flex-column align-items-stretch",children:[Object(o.jsx)("input",{className:"form-control my-2",type:"email",name:"email",placeholder:"email",value:x.email,required:!0,onChange:p}),Object(o.jsx)("input",{className:"form-control my-2",type:"password",name:"password",placeholder:"password",value:x.password,required:!0,onChange:p}),Object(o.jsx)("button",{className:"btn btn-info mt-4",disabled:r,onClick:function(e){var s;e.preventDefault(),t((s=x,function(){var e=Object(b.a)(h.a.mark((function e(t,c){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v.host,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});case 3:return a=e.sent,e.next=6,a.json();case 6:2==(n=e.sent).code?t(y(n.payload.user)):t(N(n.payload)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t(w());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,s){return e.apply(this,arguments)}}()))},children:"Login"}),Object(o.jsx)(j.b,{to:"/auth/forgotpassword",className:"btn btn-info mt-4",children:"Forgot Password"})]})};var L=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Account Already Exists"}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"It seems this account already exists, please just login into it using your credentials."}),Object(o.jsx)(R,{})]})};var q=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Log In to EBWA portal"}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"If this is you first login, please check your email, you will find a username and password, that is specific to you. Please do not share that with anyone."}),Object(o.jsx)(R,{})]})};var D=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Invalid Password"}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"Sorry, we couldn't validate your password, please check if you have typed it correctly. If you have forgotten it please request a new password."}),Object(o.jsx)(R,{})]})};var W=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-2",children:"Forgot Password"}),Object(o.jsxs)("p",{className:"fs-4 px-4",children:["If you have forgotten your password, please provide us with the email, you used to register with the Associaition."," "]}),Object(o.jsxs)("form",{className:"p-2 d-flex flex-column align-items-center",children:[Object(o.jsx)("input",{className:"form-control my-2",type:"password",placeholder:"new password",required:!0}),Object(o.jsx)(j.b,{to:"/f/auth/resetforgotpassword",className:"btn btn-info mt-4",children:"Request Password Change Link"})]})]})};var _=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-2",children:"Enter new password"}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"You have initiated a password change. A secret token has been mailed to your email account registered with us. Please open that mail and provide us with the secret access token."}),Object(o.jsxs)("form",{className:"p-2 mt-4 d-flex flex-column align-items-center",children:[Object(o.jsxs)("div",{className:"d-flex flex-column align-items-stretch w-75 mb-3",children:[Object(o.jsx)("input",{className:"form-control w-100 my-2",type:"text",placeholder:"secret token",required:!0}),Object(o.jsx)("input",{className:"form-control w-100 my-2",type:"password",placeholder:"new password",required:!0}),Object(o.jsx)("input",{className:"form-control w-100 my-2",type:"password",placeholder:"confirm new password",required:!0})]}),Object(o.jsx)(j.b,{to:"/auth/passwordchanged",className:"btn btn-info ",children:"Change Passsword"})]})]})};var M=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Change Password"}),Object(o.jsxs)("form",{className:"p-2 d-flex flex-column align-items-center",children:[Object(o.jsxs)("div",{className:"d-flex flex-column align-items-stretch w-75 mb-5",children:[Object(o.jsx)("label",{htmlFor:"",children:"Please Enter old password"}),Object(o.jsx)("input",{className:"form-control w-100 my-2",type:"password",placeholder:"old password",required:!0})]}),Object(o.jsxs)("div",{className:"d-flex flex-column align-items-stretch w-75 mb-5",children:[Object(o.jsx)("label",{htmlFor:"",children:"Please Enter new password"}),Object(o.jsx)("input",{className:"form-control w-100 my-2",type:"password",placeholder:"new password",required:!0}),Object(o.jsx)("input",{className:"form-control w-100 my-2",type:"password",placeholder:"confirm new password",required:!0})]}),Object(o.jsx)("button",{className:"btn btn-info mt-4",children:"Change Passsword"})]})]})};var U=function(){return Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5 ",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Your Password has been changed"}),Object(o.jsx)("p",{className:"fs-4 px-4",children:"You requested a password change and the same has been processed. An email regarding the same was also sent to you. You may now proceed by loggin in with your new credentials."}),Object(o.jsx)(j.b,{to:"/auth/login",className:"btn btn-info ",children:"Login"})]})};function Y(){return Object(o.jsxs)(d.c,{children:[Object(o.jsx)(d.a,{path:"/f/auth/accountcreated",children:Object(o.jsx)(P,{})}),Object(o.jsx)(d.a,{path:"/f/auth/createaccount",children:Object(o.jsx)(F,{})}),Object(o.jsx)(d.a,{path:"/f/auth/noinvite",children:Object(o.jsx)(I,{})}),Object(o.jsx)(d.a,{path:"/f/auth/accountalreadyexists",children:Object(o.jsx)(L,{})}),Object(o.jsx)(d.a,{path:"/f/auth/login",children:Object(o.jsx)(q,{})}),Object(o.jsx)(d.a,{path:"/f/auth/invalidpassword",children:Object(o.jsx)(D,{})}),Object(o.jsx)(d.a,{path:"/f/auth/forgotpassword",children:Object(o.jsx)(W,{})}),Object(o.jsx)(d.a,{path:"/f/auth/resetforgotpassword",children:Object(o.jsx)(_,{})}),Object(o.jsx)(d.a,{path:"/f/auth/changepassword",children:Object(o.jsx)(M,{})}),Object(o.jsx)(d.a,{path:"/f/auth/passwordChanged",children:Object(o.jsx)(U,{})})]})}var H=function(){var e=Object(d.f)(),t=Object(i.c)(E),s=Object(i.b)(),a=Object(c.useState)(!1),n=Object(T.a)(a,2),r=n[0],l=n[1];return Object(c.useEffect)((function(){t&&(console.log("Pre-existing session detected, rerouting. User:"+t.email),e.push("/f/noticeboard")),t||r||(console.log("Found no user, dispatching a resumeSession"),s((console.log("resume session ran"),function(){var e=Object(b.a)(h.a.mark((function e(t,s){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v.host,"/api/auth/resumesession"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:return c=e.sent,e.next=6,c.json();case 6:2==(a=e.sent).code?(t(y(a.payload.user)),t(k())):(console.log(a),t(N(a)),t(w())),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t(w());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,s){return e.apply(this,arguments)}}())),l(!0))})),Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5",children:[Object(o.jsx)("h1",{className:"mb-5",children:"Welcome to Expat Buyer's Welfare Associaiton"}),Object(o.jsx)("p",{className:"fs-4",children:"If this is your first time here, please claim your account."}),Object(o.jsx)(j.b,{to:"/f/auth/createaccount",className:"btn btn-info mt-2 align-self-center",children:"Claim Account"}),Object(o.jsx)("hr",{className:"my-3"}),Object(o.jsx)("h1",{className:"mt-4",children:"Already Have an account?"}),Object(o.jsx)(j.b,{to:"/f/auth/login",className:"btn btn-info mt-2 align-self-center",children:"LogIn"}),Object(o.jsx)("h3",{className:"mt-5",children:"Users who have actived their accounts"}),Object(o.jsx)("iframe",{style:{backgroundColor:"#FFFFFF",border:"none",borderRadius:"2px",boxShadow:"0 2px 10px 0 rgba(70, 76, 79, .2)",margin:"20px auto 20px auto"},width:"320",height:"240",src:"https://charts.mongodb.com/charts-project-0-xksgk/embed/charts?id=25ea2996-39b1-401c-8782-12ffc2adf43b&theme=light"})]})},J=s(33),V=s.n(J);var G=function(){var e=Object(d.g)(),t=V.a.parse(e.search,{ignoreQueryPrefix:!0}).error;return console.log(e),Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-stretch justify-content-center text-center vh-100 p-5",children:[Object(o.jsxs)("h3",{className:"text-danger",children:[" ",t," "]}),Object(o.jsx)("hr",{}),Object(o.jsx)("h1",{className:"mb-1",children:"We Faced an error."}),Object(o.jsx)("p",{className:"fs-4",children:"We are sorry something went wrong please use the back button to go where you were."}),Object(o.jsx)(j.b,{to:"/f/auth/welcome",children:"Back to Welcome Screen"})]})};var Q=function(e){var t=e.user;return Object(o.jsxs)("div",{className:"container mt-3 mb-0",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("h2",{className:"text-center mb-0",children:["Hello, ",t.name]})}),Object(o.jsxs)("div",{className:"row justify-content-center gx-0 pt-0",children:[Object(o.jsxs)("div",{className:"col-4 text-end text-muted",children:["CID ",t.cid]}),Object(o.jsx)("div",{className:"col-1 text-center",children:Object(o.jsx)("b",{children:"|"})}),Object(o.jsx)("div",{className:"col-4 text-start text-muted",children:t.designation})]})]})},Z=s(34);var z=function(e){var t=e.post,s=new Date(t.date);return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"container-fluid bg-light my-4 p-4",children:[Object(o.jsxs)("div",{className:"row align-items-center",children:[Object(o.jsxs)("div",{className:"col-10",children:[Object(o.jsxs)("p",{className:"fs-5 my-0",children:[" ",Object(o.jsx)("b",{children:t.author.name})," | ",Object(o.jsxs)("span",{className:"fs-6 text-muted",children:[" ",t.author.designation," "]})," "]}),Object(o.jsxs)("p",{className:"fs-6 my-0 text-muted",children:[" ",s.toLocaleDateString()]})]}),Object(o.jsx)("div",{className:"col-2 d-flex justify-content-end",children:Object(o.jsx)("button",{className:"btn btn-info",children:" Edit "})})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("p",{className:"fs-4 mt-3 text-center",children:Object(o.jsx)("b",{children:t.title})}),Object(o.jsx)("p",{className:"fs-5 mt-3 text-center",children:t.subject})]}),Object(o.jsx)("div",{className:"col-12",children:Object(o.jsx)("p",{className:"fs-6 mt-3 text-left",children:t.message})})]})]})})};var K=function(e){var t,s=e.posts,c=[],a=Object(Z.a)(s);try{for(a.s();!(t=a.n()).done;){var n=t.value;c.push(Object(o.jsx)(z,{post:n}))}}catch(r){a.e(r)}finally{a.f()}return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"conatiner mt-3 px-3",children:[Object(o.jsx)("h5",{children:"Notice Board"}),Object(o.jsx)("hr",{className:"my-0"}),c]})})};function X(){var e=Object(d.f)(),t=Object(i.c)(E),s=Object(i.c)(C);return Object(c.useEffect)((function(){console.log(s),t?console.log("Notice board found user : "+t.email):(console.log("Redirecting to Login"),e.push("/f/auth/login"))})),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Q,{user:t}),Object(o.jsx)(K,{posts:s})]})}var $=s(12),ee=s(35),te=s(36),se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.payload;case x:return!1;default:return e}},ce={user:!1,noticeBoard:!1},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(A.a)(Object(A.a)({},e),{},{user:t.payload});case g:return Object(A.a)(Object(A.a)({},e),{},{noticeBoard:t.payload});default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;case O:return!1;default:return e}},re=Object(ee.composeWithDevTools)(Object($.applyMiddleware)(te.a)),oe=Object($.combineReducers)({user:se,error:ae,noticeBoard:ne}),le=Object($.createStore)(oe,re);var ie=function(){return console.log(v.host),Object(o.jsx)(i.a,{store:le,children:Object(o.jsx)(j.a,{children:Object(o.jsxs)(l,{children:[Object(o.jsx)(S,{}),Object(o.jsxs)(d.c,{children:[Object(o.jsx)(d.a,{path:"/f/auth/*",children:Object(o.jsx)(Y,{})}),Object(o.jsx)(d.a,{path:"/f/noticeboard",children:Object(o.jsx)(X,{})}),Object(o.jsx)(d.a,{path:"/f/error",children:Object(o.jsx)(G,{})}),Object(o.jsx)(d.a,{path:"/",children:Object(o.jsx)(H,{})})]})]})})})},de=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,61)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),c(e),a(e),n(e),r(e)}))};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(ie,{})}),document.getElementById("root")),de()}},[[60,1,2]]]);
//# sourceMappingURL=main.b7fb176e.chunk.js.map